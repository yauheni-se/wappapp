x == "Road service" ~ "Service road",
x == "Road residential" ~ "Residential road",
x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
TRUE ~ x
)
}
rename_objects <- function(x) {
case_when(
#x == "College university" ~  "College/university",
#x == "Public service" ~ "Police/fire department",
#x == "School kindergarden" ~ "School/kindergarden",
#x == "Road cycleway" ~ "Cycleway",
#x == "Road footway" ~ "Footway",
#x == "Road primary" ~ "Primary road",
#x == "Road secondary" ~ "Secondary road"
#x == "Road tertiary" ~ "Tertiary road",
#x == "Road service" ~ "Service road",
#x == "Road residential" ~ "Residential road",
#x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
TRUE ~ x
)
}
rename_objects <- function(x) {
case_when(
x == "College university" ~  "College/university",
#x == "Public service" ~ "Police/fire department",
#x == "School kindergarden" ~ "School/kindergarden",
#x == "Road cycleway" ~ "Cycleway",
#x == "Road footway" ~ "Footway",
#x == "Road primary" ~ "Primary road",
#x == "Road secondary" ~ "Secondary road"
#x == "Road tertiary" ~ "Tertiary road",
#x == "Road service" ~ "Service road",
#x == "Road residential" ~ "Residential road",
#x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
TRUE ~ x
)
}
rename_objects <- function(x) {
case_when(
x == "College university" ~  "College/university",
x == "Public service" ~ "Police/fire department",
#x == "School kindergarden" ~ "School/kindergarden",
#x == "Road cycleway" ~ "Cycleway",
#x == "Road footway" ~ "Footway",
#x == "Road primary" ~ "Primary road",
#x == "Road secondary" ~ "Secondary road"
#x == "Road tertiary" ~ "Tertiary road",
#x == "Road service" ~ "Service road",
#x == "Road residential" ~ "Residential road",
#x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
TRUE ~ x
)
}
rename_objects <- function(x) {
case_when(
x == "College university" ~  "College/university",
x == "Public service" ~ "Police/fire department",
x == "School kindergarden" ~ "School/kindergarden",
#x == "Road cycleway" ~ "Cycleway",
#x == "Road footway" ~ "Footway",
#x == "Road primary" ~ "Primary road",
#x == "Road secondary" ~ "Secondary road"
#x == "Road tertiary" ~ "Tertiary road",
#x == "Road service" ~ "Service road",
#x == "Road residential" ~ "Residential road",
#x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
TRUE ~ x
)
}
rename_objects <- function(x) {
case_when(
x == "College university" ~  "College/university",
x == "Public service" ~ "Police/fire department",
x == "School kindergarden" ~ "School/kindergarden",
x == "Road cycleway" ~ "Cycleway",
#x == "Road footway" ~ "Footway",
#x == "Road primary" ~ "Primary road",
#x == "Road secondary" ~ "Secondary road"
#x == "Road tertiary" ~ "Tertiary road",
#x == "Road service" ~ "Service road",
#x == "Road residential" ~ "Residential road",
#x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
TRUE ~ x
)
}
rename_objects <- function(x) {
case_when(
x == "College university" ~  "College/university",
x == "Public service" ~ "Police/fire department",
x == "School kindergarden" ~ "School/kindergarden",
x == "Road cycleway" ~ "Cycleway",
x == "Road footway" ~ "Footway",
x == "Road primary" ~ "Primary road",
x == "Road secondary" ~ "Secondary road",
x == "Road tertiary" ~ "Tertiary road",
x == "Road service" ~ "Service road",
x == "Road residential" ~ "Residential road",
x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
TRUE ~ x
)
}
flat %>%
select(starts_with('dist_')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('dist_airport', 'dist_prison', 'dist_road_track_grade', 'dist_road_trunk', 'dist_river', 'dist_cbd'), value, exp(value)),
name = str_remove(name, 'dist_') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(name = rename_objects(name)) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Distance, km')) %>%
pull(Object)
rename_objects <- function(x) {
case_when(
x == "College university" ~  "College/university",
x == "Public service" ~ "Police/fire department",
x == "School kindergarden" ~ "School/kindergarden",
x == "Road cycleway" ~ "Cycleway",
x == "Road footway" ~ "Footway",
x == "Road primary" ~ "Primary road",
x == "Road secondary" ~ "Secondary road",
x == "Road tertiary" ~ "Tertiary road",
x == "Road service" ~ "Service road",
x == "Road residential" ~ "Residential road",
x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
x == "Cbd" ~ "Palace of Culture and Science",
x == "Temple catholic" ~ "Catholic temple",
x == "Temple other" ~ "Other temple"
TRUE ~ x
)
}
rename_objects <- function(x) {
case_when(
x == "College university" ~  "College/university",
x == "Public service" ~ "Police/fire department",
x == "School kindergarden" ~ "School/kindergarden",
x == "Road cycleway" ~ "Cycleway",
x == "Road footway" ~ "Footway",
x == "Road primary" ~ "Primary road",
x == "Road secondary" ~ "Secondary road",
x == "Road tertiary" ~ "Tertiary road",
x == "Road service" ~ "Service road",
x == "Road residential" ~ "Residential road",
x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
x == "Cbd" ~ "Palace of Culture and Science",
x == "Temple catholic" ~ "Catholic temple",
x == "Temple other" ~ "Other temple",
TRUE ~ x
)
}
flat %>%
select(starts_with('dist_')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('dist_airport', 'dist_prison', 'dist_road_track_grade', 'dist_road_trunk', 'dist_river', 'dist_cbd'), value, exp(value)),
name = str_remove(name, 'dist_') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(name = rename_objects(name)) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Distance, km')) %>%
pull(Object)
rename_objects <- function(x) {
case_when(
x == "College university" ~  "College/university",
x == "Public service" ~ "Police/fire department",
x == "School kindergarden" ~ "School/kindergarden",
x == "Road cycleway" ~ "Cycleway",
x == "Road footway" ~ "Footway",
x == "Road primary" ~ "Primary road",
x == "Road secondary" ~ "Secondary road",
x == "Road tertiary" ~ "Tertiary road",
x == "Road service" ~ "Service road",
x == "Road residential" ~ "Residential road",
x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
x == "Cbd" ~ "Palace of Culture and Science (city center)",
x == "Temple catholic" ~ "Catholic temple",
x == "Temple other" ~ "Other temple",
TRUE ~ x
)
}
flat %>%
select(starts_with('dist_')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('dist_airport', 'dist_prison', 'dist_road_track_grade', 'dist_road_trunk', 'dist_river', 'dist_cbd'), value, exp(value)),
name = str_remove(name, 'dist_') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(name = rename_objects(name)) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Distance, km')) %>%
pull(Object)
flat %>%
select(starts_with('dist_')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('dist_airport', 'dist_prison', 'dist_road_track_grade', 'dist_road_trunk', 'dist_river', 'dist_cbd'), value, exp(value)),
name = str_remove(name, 'dist_') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = value/1000
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Distance, km'))
flat %>%
select(starts_with('dist_')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('dist_airport', 'dist_prison', 'dist_road_track_grade', 'dist_road_trunk', 'dist_river', 'dist_cbd'), value, exp(value)),
name = str_remove(name, 'dist_') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, 0)
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Distance, m'))
flat %>%
select(starts_with('dist_')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('dist_airport', 'dist_prison', 'dist_road_track_grade', 'dist_road_trunk', 'dist_river', 'dist_cbd'), value, exp(value)),
name = str_remove(name, 'dist_') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, -1)
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Distance, m'))
#library(rhandsontable)
library(DT)
flat %>%
select(starts_with('dist_')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('dist_airport', 'dist_prison', 'dist_road_track_grade', 'dist_road_trunk', 'dist_river', 'dist_cbd'), value, exp(value)),
name = str_remove(name, 'dist_') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, -1)
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Distance, m')) %>%
datatable(
rownames = FALSE
)
flat %>%
select(starts_with('dist_')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('dist_airport', 'dist_prison', 'dist_road_track_grade', 'dist_road_trunk', 'dist_river', 'dist_cbd'), value, exp(value)),
name = str_remove(name, 'dist_') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, -1)
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Distance, m')) %>%
datatable(
rownames = FALSE,
options(
scrollY = TRUE
)
)
flat %>%
select(starts_with('dist_')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('dist_airport', 'dist_prison', 'dist_road_track_grade', 'dist_road_trunk', 'dist_river', 'dist_cbd'), value, exp(value)),
name = str_remove(name, 'dist_') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, -1)
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Distance, m')) %>%
datatable(
rownames = FALSE
)
clear_dists <- function(df) {
df %>%
select(starts_with('dist_')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('dist_airport', 'dist_prison', 'dist_road_track_grade', 'dist_road_trunk', 'dist_river', 'dist_cbd'), value, exp(value)),
name = str_remove(name, 'dist_') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, -1)
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Distance, m')) %>%
datatable(
rownames = FALSE
)
}
clear_dists(flat)
clear_dists(flat)
flat %>%
select(ends_with('_800'))
flat %>%
select(ends_with('_800')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('bus_stops_800', 'industrials_800', 'playgrounds_800', 'sport_objects_800'), value, exp(value)),
name = str_remove(name, '_800') %>% str_replace_all('_', ' ') %>% str_to_sentence()
)
flat %>%
select(ends_with('_800')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('bus_stops_800', 'industrials_800', 'playgrounds_800', 'sport_objects_800'), value, exp(value)),
name = str_remove(name, '_800') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, 0)
) %>%
arrange(name)
flat %>%
select(ends_with('_800')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('bus_stops_800', 'industrials_800', 'playgrounds_800', 'sport_objects_800'), value, exp(value)),
name = str_remove(name, '_800') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, 0)
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Number of objects within 2 square km')) %>%
datatable(
rownames = FALSE
)
flat %>%
select(ends_with('_800')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('bus_stops_800', 'industrials_800', 'playgrounds_800', 'sport_objects_800'), value, exp(value)),
name = str_remove(name, '_800') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, 0)
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Number of objects within 2 sq. km.')) %>%
datatable(
rownames = FALSE
)
rename_objects <- function(x) {
case_when(
x == "College university" ~  "College/university",
x == "Public service" ~ "Police/fire department",
x == "School kindergarden" ~ "School/kindergarden",
x == "School kindergardens" ~ "Schools/kindergardens",
x == "Road cycleway" ~ "Cycleway",
x == "Road footway" ~ "Footway",
x == "Road primary" ~ "Primary road",
x == "Road secondary" ~ "Secondary road",
x == "Road tertiary" ~ "Tertiary road",
x == "Road service" ~ "Service road",
x == "Road residential" ~ "Residential road",
x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
x == "Cbd" ~ "Palace of Culture and Science (city center)",
x == "Temple catholic" ~ "Catholic temple",
x == "Temple other" ~ "Non-catholic temple",
TRUE ~ x
)
}
flat %>%
select(ends_with('_800')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('bus_stops_800', 'industrials_800', 'playgrounds_800', 'sport_objects_800'), value, exp(value)),
name = str_remove(name, '_800') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, 0)
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Number of objects within 2 sq. km.')) %>%
datatable(
rownames = FALSE
)
rename_objects <- function(x) {
case_when(
x == "College university" ~  "College/university",
x == "Public service" ~ "Police/fire department",
x == "School kindergarden" ~ "School/kindergarden",
x == "School kindergardens" ~ "Schools/kindergardens",
x == "Road cycleway" ~ "Cycleway",
x == "Road footway" ~ "Footway",
x == "Road primary" ~ "Primary road",
x == "Road secondary" ~ "Secondary road",
x == "Road tertiary" ~ "Tertiary road",
x == "Road service" ~ "Service road",
x == "Road residential" ~ "Residential road",
x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
x == "Cbd" ~ "Palace of Culture and Science (city center)",
x == "Temple catholic" ~ "Catholic temple",
x == "Temple other" ~ "Non-catholic temple",
x == "Industrials" ~ "Industrial objects"
TRUE ~ x
)
}
rename_objects <- function(x) {
case_when(
x == "College university" ~  "College/university",
x == "Public service" ~ "Police/fire department",
x == "School kindergarden" ~ "School/kindergarden",
x == "School kindergardens" ~ "Schools/kindergardens",
x == "Road cycleway" ~ "Cycleway",
x == "Road footway" ~ "Footway",
x == "Road primary" ~ "Primary road",
x == "Road secondary" ~ "Secondary road",
x == "Road tertiary" ~ "Tertiary road",
x == "Road service" ~ "Service road",
x == "Road residential" ~ "Residential road",
x == "Road track grade" ~ "Unpaved/gravel road",
x == "Road trunk" ~ "Autostrade",
x == "Cbd" ~ "Palace of Culture and Science (city center)",
x == "Temple catholic" ~ "Catholic temple",
x == "Temple other" ~ "Non-catholic temple",
x == "Industrials" ~ "Industrial objects",
TRUE ~ x
)
}
flat %>%
select(ends_with('_800')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('bus_stops_800', 'industrials_800', 'playgrounds_800', 'sport_objects_800'), value, exp(value)),
name = str_remove(name, '_800') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, 0)
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Number of objects within 2 sq. km.')) %>%
datatable(
rownames = FALSE
)
clear_counts <- function(df) {
df %>%
select(ends_with('_800')) %>%
pivot_longer(cols = colnames(.)) %>%
mutate(
value = ifelse(name %in% c('bus_stops_800', 'industrials_800', 'playgrounds_800', 'sport_objects_800'), value, exp(value)),
name = str_remove(name, '_800') %>% str_replace_all('_', ' ') %>% str_to_sentence()
) %>%
mutate(
name = rename_objects(name),
value = round(value, 0)
) %>%
arrange(name) %>%
`colnames<-`(c('Object', 'Number of objects within 2 sq. km.')) %>%
datatable(
rownames = FALSE
)
}
clear_counts(flat)
Sys.setenv(lang = "en_US")
options(shiny.sanitize.errors = FALSE, scipen = 999, dplyr.summarise.inform = FALSE)#warn = -1,
rm(list = ls())
setwd('C:/Projects/wappapp/')
files_to_exclude <- c('app.R', 'theme.css')
for (i in list.files(recursive = TRUE)) {
if (!i %in% files_to_exclude & !stringr::str_detect(i, 'data\\/')) {
source(i)
}
}
shinyApp(ui, server)
library(shiny)
runGitHub( "wappapp", "yauheni-se")
install.packages('rsconnect')
rsconnect::setAccountInfo(name='yauheni-se',
token='EA8BF4E9D9065503A21661A3B97C182A',
secret='<SECRET>')
rsconnect::setAccountInfo(name='yauheni-se',
token='EA8BF4E9D9065503A21661A3B97C182A',
secret='YpRgwZ0xfIdgVXPyCE9iZJAXyyqaRCKSeCfzTKxb')
?rsconnect::deployApp
library(rsconnect)
rsconnect::deployApp('C:/Projects/wappapp')
install.packages(cli)
install.packages("cli")
install.packages("cli")
.libPaths()
install.packages('cli', lib = "C:/Program Files/R/R-4.0.4/library")
install.packages("cli", lib = "C:/Program Files/R/R-4.0.4/library")
